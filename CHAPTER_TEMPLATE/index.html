<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Chapter X: [Chapter Title]</title>
  <meta name="description" content="A hands-on guide to creating music, sound effects, and audio experiences with AI">
  <link rel="canonical" href="https://scttfrdmn.github.io/practical-meta-audiocraft/CHAPTER_TEMPLATE/">
  
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      line-height: 1.6;
      color: #333;
      margin: 0;
      padding: 0;
    }
    .wrapper {
      max-width: 100%;
    }
    .container {
      max-width: 960px;
      margin: 0 auto;
      padding: 0 20px;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 2rem;
      margin-bottom: 1rem;
    }
    h1 { color: #1a73e8; }
    h2 { color: #34a853; }
    a {
      color: #1a73e8;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    .site-header {
      border-bottom: 1px solid #eee;
      padding: 15px 0;
      margin-bottom: 30px;
    }
    .site-title {
      margin: 0;
      font-size: 1.8rem;
    }
    .site-title a {
      color: #1a73e8;
      text-decoration: none;
    }
    .site-nav {
      float: right;
      margin-top: 10px;
    }
    .site-nav .page-link {
      margin-left: 20px;
    }
    .nav-trigger {
      display: none;
    }
    .menu-icon {
      display: none;
    }
    .page-content {
      padding: 20px 0;
    }
    .site-footer {
      border-top: 1px solid #eee;
      padding: 30px 0;
      margin-top: 60px;
    }
    .footer-col-wrapper {
      display: flex;
      flex-wrap: wrap;
    }
    .footer-col {
      flex: 1;
      min-width: 200px;
      padding-right: 20px;
    }
    code {
      background-color: #f5f5f5;
      padding: 2px 5px;
      border-radius: 3px;
    }
    pre {
      background-color: #f5f5f5;
      padding: 15px;
      border-radius: 5px;
      overflow-x: auto;
    }
    .highlight {
      background-color: #f5f5f5;
      border-radius: 5px;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      margin-bottom: 20px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px 12px;
    }
    th {
      background-color: #f5f5f5;
      text-align: left;
    }
    button, .button {
      display: inline-block;
      background-color: #1a73e8;
      color: white !important;
      padding: 10px 20px;
      border-radius: 4px;
      font-weight: bold;
      margin-top: 20px;
      border: none;
      cursor: pointer;
      text-decoration: none !important;
    }
    button:hover, .button:hover {
      background-color: #0d65d9;
    }
    .feature {
      background-color: #f5f5f5;
      border-radius: 8px;
      padding: 20px;
      border-left: 4px solid #1a73e8;
      margin-bottom: 20px;
    }
    
    @media screen and (max-width: 600px) {
      .site-nav {
        position: absolute;
        top: 70px;
        right: 20px;
        background-color: white;
        border: 1px solid #ddd;
        border-radius: 5px;
        text-align: right;
        padding: 0;
        z-index: 1;
      }
      .site-nav .page-link {
        display: block;
        padding: 10px;
        margin: 0;
      }
      .site-nav .menu-icon {
        display: block;
        float: right;
        width: 36px;
        height: 26px;
        line-height: 0;
        padding-top: 10px;
        text-align: center;
      }
      .site-nav .trigger {
        clear: both;
        display: none;
      }
      .site-nav input:checked ~ .trigger {
        display: block;
        padding-bottom: 5px;
      }
      .footer-col-wrapper {
        flex-direction: column;
      }
      .footer-col {
        margin-bottom: 20px;
      }
    }
  </style>
</head><body>
    <div class="wrapper">
      <header class="site-header">
        <div class="container">
          <h1 class="site-title"><a href="/practical-meta-audiocraft/">Practical Meta AudioCraft</a></h1>
          <nav class="site-nav">
            <input type="checkbox" id="nav-trigger" class="nav-trigger" />
            <label for="nav-trigger">
              <span class="menu-icon">
                <svg viewBox="0 0 18 15" width="18px" height="15px">
                  <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484c0-0.82,0.665-1.485,1.484-1.485 h15.032C17.335,0,18,0.665,18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516 c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,6.031,18,6.696,18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516c0-0.82,0.665-1.483,1.484-1.483h15.032 C17.335,12.031,18,12.696,18,13.516z"/>
                </svg>
              </span>
            </label>

            <div class="trigger">
              <a class="page-link" href="/practical-meta-audiocraft/">Home</a>
              <a class="page-link" href="/practical-meta-audiocraft/chapters/part1/introduction/">Getting Started</a>
              <a class="page-link" href="/practical-meta-audiocraft/chapters/part2/basic-music/">MusicGen</a>
              <a class="page-link" href="/practical-meta-audiocraft/chapters/part3/introduction-to-audiogen/">AudioGen</a>
              <a class="page-link" href="/practical-meta-audiocraft/tutorials/getting-started/">Tutorials</a>
            </div>
          </nav>
        </div>
      </header>

      <main class="page-content" aria-label="Content">
        <div class="container">
          <div class="chapter">
  <div class="chapter-header">
    <div class="chapter-metadata">
      <span class="difficulty beginner|intermediate|advanced">Beginner|intermediate|advanced</span>
      <span class="estimated-time">X hours</span>
    </div>
    <h1>Chapter X: [Chapter Title]</h1>
  </div>
  
  
  
  <blockquote>
  <p>“I need to create [specific audio type] for my [application/project], but I’m not sure how to generate audio that sounds [desired quality].” — <em>[Persona Name], [Persona Role]</em></p>
</blockquote>

<h1 id="chapter-x-chapter-title">Chapter X: [Chapter Title]</h1>

<h2 id="the-challenge">The Challenge</h2>

<p>[Real-world problem description in 2-3 paragraphs. Explain the challenges that practitioners face when trying to accomplish this audio generation task.]</p>

<p>In this chapter, you’ll learn how to [main learning objective] by [approach]. We’ll walk through the entire process from [starting point] to [end result], with practical examples you can run on your own system.</p>

<h2 id="learning-objectives">Learning Objectives</h2>

<p>By the end of this chapter, you’ll be able to:</p>

<ul>
  <li>[Specific skill or knowledge #1]</li>
  <li>[Specific skill or knowledge #2]</li>
  <li>[Specific skill or knowledge #3]</li>
  <li>[Specific skill or knowledge #4]</li>
</ul>

<h2 id="prerequisites">Prerequisites</h2>

<p>Before proceeding, ensure you have:</p>
<ul>
  <li>[Prerequisite #1]</li>
  <li>[Prerequisite #2]</li>
  <li>[Prerequisite #3]</li>
</ul>

<h2 id="key-concepts">Key Concepts</h2>

<h3 id="concept-name">[Concept Name]</h3>

<p>[Explain the key concept in 2-3 paragraphs with analogies and clear language. Connect it to the chapter’s learning objectives.]</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Simple example illustrating the concept
</span></code></pre></div></div>

<h3 id="another-concept-name">[Another Concept Name]</h3>

<p>[Explain another key concept in 2-3 paragraphs with analogies and clear language. Connect it to the chapter’s learning objectives.]</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Simple example illustrating the concept
</span></code></pre></div></div>

<h2 id="solution-walkthrough">Solution Walkthrough</h2>

<h3 id="1-first-step">1. [First Step]</h3>

<p>Let’s begin by [first step description]. This is crucial because [reason].</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Code for first step with detailed comments
</span><span class="kn">import</span> <span class="nn">torch</span>
<span class="kn">from</span> <span class="nn">audiocraft.models</span> <span class="kn">import</span> <span class="n">MusicGen</span>  <span class="c1"># Import the model we'll be using
</span>
<span class="c1"># Set up our environment
</span><span class="k">if</span> <span class="n">torch</span><span class="p">.</span><span class="n">backends</span><span class="p">.</span><span class="n">mps</span><span class="p">.</span><span class="n">is_available</span><span class="p">():</span>
    <span class="n">device</span> <span class="o">=</span> <span class="s">"mps"</span>  <span class="c1"># Apple Silicon GPU
</span>    <span class="k">print</span><span class="p">(</span><span class="s">"Using MPS (Metal) for generation"</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">torch</span><span class="p">.</span><span class="n">cuda</span><span class="p">.</span><span class="n">is_available</span><span class="p">():</span>
    <span class="n">device</span> <span class="o">=</span> <span class="s">"cuda"</span>  <span class="c1"># NVIDIA GPU
</span>    <span class="k">print</span><span class="p">(</span><span class="s">"Using CUDA for generation"</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">device</span> <span class="o">=</span> <span class="s">"cpu"</span>  <span class="c1"># Fallback to CPU
</span>    <span class="k">print</span><span class="p">(</span><span class="s">"Using CPU for generation (this will be slow)"</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="2-second-step">2. [Second Step]</h3>

<p>Now that we’ve [first step], we can [second step]. This involves [explanation].</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Code for second step with detailed comments
# Load the model
</span><span class="n">model</span> <span class="o">=</span> <span class="n">MusicGen</span><span class="p">.</span><span class="n">get_pretrained</span><span class="p">(</span><span class="s">'small'</span><span class="p">)</span>
<span class="n">model</span><span class="p">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>  <span class="c1"># Move model to the appropriate device
</span>
<span class="c1"># Configure generation parameters
</span><span class="n">model</span><span class="p">.</span><span class="n">set_generation_params</span><span class="p">(</span>
    <span class="n">duration</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>       <span class="c1"># Length of audio to generate in seconds
</span>    <span class="n">temperature</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>     <span class="c1"># Controls randomness/creativity
</span>    <span class="n">top_k</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span>           <span class="c1"># Limits sampling to top 250 token predictions
</span>    <span class="n">top_p</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>           <span class="c1"># Disables nucleus sampling
</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="3-third-step">3. [Third Step]</h3>

<p>With [previous steps] in place, we can now [third step]. This is where [explanation].</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Code for third step with detailed comments
# Define our prompt
</span><span class="n">prompt</span> <span class="o">=</span> <span class="s">"An upbeat electronic track with a catchy melody and energetic rhythm"</span>

<span class="c1"># Generate the audio
</span><span class="n">wav</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="n">generate</span><span class="p">([</span><span class="n">prompt</span><span class="p">])</span>  <span class="c1"># Note: model.generate expects a list of prompts
</span></code></pre></div></div>

<h3 id="4-fourth-step">4. [Fourth Step]</h3>

<p>Finally, we [fourth step] to [complete the solution].</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Code for fourth step with detailed comments
</span><span class="kn">from</span> <span class="nn">audiocraft.data.audio</span> <span class="kn">import</span> <span class="n">audio_write</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># Create output directory
</span><span class="n">output_dir</span> <span class="o">=</span> <span class="s">"music_output"</span>
<span class="n">os</span><span class="p">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># Save the generated audio
</span><span class="n">output_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="s">"my_generated_music"</span><span class="p">)</span>
<span class="n">audio_write</span><span class="p">(</span>
    <span class="n">output_path</span><span class="p">,</span>         <span class="c1"># Path without extension
</span>    <span class="n">wav</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">cpu</span><span class="p">(),</span>        <span class="c1"># Audio tensor (first in batch)
</span>    <span class="n">model</span><span class="p">.</span><span class="n">sample_rate</span><span class="p">,</span>   <span class="c1"># Sample rate (32kHz for MusicGen)
</span>    <span class="n">strategy</span><span class="o">=</span><span class="s">"loudness"</span><span class="p">,</span> <span class="c1"># Normalize loudness for consistent volume
</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Audio saved to </span><span class="si">{</span><span class="n">output_path</span><span class="si">}</span><span class="s">.wav"</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="complete-implementation">Complete Implementation</h2>

<p>Let’s put everything together into a complete, runnable example:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># complete_example.py - [Brief description of what this file does]
</span><span class="kn">import</span> <span class="nn">torch</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">audiocraft.models</span> <span class="kn">import</span> <span class="n">MusicGen</span>
<span class="kn">from</span> <span class="nn">audiocraft.data.audio</span> <span class="kn">import</span> <span class="n">audio_write</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">def</span> <span class="nf">generate_music</span><span class="p">(</span>
    <span class="n">prompt</span><span class="p">,</span>
    <span class="n">duration</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>
    <span class="n">model_size</span><span class="o">=</span><span class="s">"small"</span><span class="p">,</span>
    <span class="n">output_dir</span><span class="o">=</span><span class="s">"music_output"</span><span class="p">,</span>
    <span class="n">temperature</span><span class="o">=</span><span class="mf">1.0</span>
<span class="p">):</span>
    <span class="s">"""
    Generate music based on a text prompt.
    
    Args:
        prompt (str): Text description of the music to generate
        duration (float): Length of audio in seconds (max 30 seconds)
        model_size (str): Size of model to use ("small", "medium", or "large")
        output_dir (str): Directory to save output files
        temperature (float): Controls randomness (higher = more random)
    
    Returns:
        str: Path to the generated audio file
    """</span>
    <span class="c1"># Create output directory if it doesn't exist
</span>    <span class="n">os</span><span class="p">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Generating music for prompt: '</span><span class="si">{</span><span class="n">prompt</span><span class="si">}</span><span class="s">'"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Using model size: </span><span class="si">{</span><span class="n">model_size</span><span class="si">}</span><span class="s">, duration: </span><span class="si">{</span><span class="n">duration</span><span class="si">}</span><span class="s">s"</span><span class="p">)</span>
    
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span>
    
    <span class="c1"># Determine the best device for computation
</span>    <span class="k">if</span> <span class="n">torch</span><span class="p">.</span><span class="n">backends</span><span class="p">.</span><span class="n">mps</span><span class="p">.</span><span class="n">is_available</span><span class="p">():</span>
        <span class="n">device</span> <span class="o">=</span> <span class="s">"mps"</span>  <span class="c1"># Apple Silicon GPU
</span>        <span class="k">print</span><span class="p">(</span><span class="s">"Using MPS (Metal) for generation"</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">torch</span><span class="p">.</span><span class="n">cuda</span><span class="p">.</span><span class="n">is_available</span><span class="p">():</span>
        <span class="n">device</span> <span class="o">=</span> <span class="s">"cuda"</span>  <span class="c1"># NVIDIA GPU
</span>        <span class="k">print</span><span class="p">(</span><span class="s">"Using CUDA for generation"</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">device</span> <span class="o">=</span> <span class="s">"cpu"</span>  <span class="c1"># Fallback to CPU
</span>        <span class="k">print</span><span class="p">(</span><span class="s">"Using CPU for generation (this will be slow)"</span><span class="p">)</span>
    
    <span class="c1"># Load the model
</span>    <span class="n">model</span> <span class="o">=</span> <span class="n">MusicGen</span><span class="p">.</span><span class="n">get_pretrained</span><span class="p">(</span><span class="n">model_size</span><span class="p">)</span>
    <span class="n">model</span><span class="p">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
    
    <span class="c1"># Configure generation parameters
</span>    <span class="n">model</span><span class="p">.</span><span class="n">set_generation_params</span><span class="p">(</span>
        <span class="n">duration</span><span class="o">=</span><span class="n">duration</span><span class="p">,</span>       <span class="c1"># Length of audio to generate in seconds
</span>        <span class="n">temperature</span><span class="o">=</span><span class="n">temperature</span><span class="p">,</span> <span class="c1"># Controls randomness/creativity
</span>        <span class="n">top_k</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span>               <span class="c1"># Limits sampling to top 250 token predictions
</span>        <span class="n">top_p</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>               <span class="c1"># Disables nucleus sampling
</span>    <span class="p">)</span>
    
    <span class="c1"># Generate music
</span>    <span class="n">wav</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="n">generate</span><span class="p">([</span><span class="n">prompt</span><span class="p">])</span>  <span class="c1"># Model expects a list of prompts
</span>    
    <span class="c1"># Create a filename based on the prompt
</span>    <span class="n">safe_prompt</span> <span class="o">=</span> <span class="s">""</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span> <span class="k">if</span> <span class="n">c</span><span class="p">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="k">else</span> <span class="s">"_"</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">prompt</span><span class="p">)[:</span><span class="mi">30</span><span class="p">]</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">safe_prompt</span><span class="si">}</span><span class="s">_</span><span class="si">{</span><span class="n">model_size</span><span class="si">}</span><span class="s">_</span><span class="si">{</span><span class="n">duration</span><span class="si">}</span><span class="s">s"</span>
    
    <span class="c1"># Save the audio file
</span>    <span class="n">output_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="n">audio_write</span><span class="p">(</span>
        <span class="n">output_path</span><span class="p">,</span> 
        <span class="n">wav</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">cpu</span><span class="p">(),</span> 
        <span class="n">model</span><span class="p">.</span><span class="n">sample_rate</span><span class="p">,</span> 
        <span class="n">strategy</span><span class="o">=</span><span class="s">"loudness"</span><span class="p">,</span>  <span class="c1"># Normalize for consistent volume
</span>    <span class="p">)</span>
    
    <span class="n">generation_time</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Generation completed in </span><span class="si">{</span><span class="n">generation_time</span><span class="p">:.</span><span class="mi">2</span><span class="n">f</span><span class="si">}</span><span class="s"> seconds"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Audio saved to </span><span class="si">{</span><span class="n">output_path</span><span class="si">}</span><span class="s">.wav"</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">output_path</span><span class="si">}</span><span class="s">.wav"</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="c1"># Example prompts to try
</span>    <span class="n">prompts</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">"An upbeat electronic dance track with a catchy melody and energetic rhythm"</span><span class="p">,</span>
        <span class="s">"A peaceful piano solo with gentle melodies"</span><span class="p">,</span>
        <span class="s">"An orchestral film score with dramatic strings and brass"</span><span class="p">,</span>
        <span class="s">"A jazz fusion piece with funky bass and smooth saxophone"</span><span class="p">,</span>
        <span class="s">"A lo-fi hip hop beat with relaxing atmosphere"</span>
    <span class="p">]</span>
    
    <span class="c1"># Generate music for the first prompt
</span>    <span class="c1"># Change the index to try different prompts
</span>    <span class="n">generate_music</span><span class="p">(</span>
        <span class="n">prompt</span><span class="o">=</span><span class="n">prompts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">duration</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span>       <span class="c1"># 10 seconds
</span>        <span class="n">model_size</span><span class="o">=</span><span class="s">"small"</span><span class="p">,</span>  <span class="c1"># Use "small", "medium", or "large"
</span>        <span class="n">temperature</span><span class="o">=</span><span class="mf">1.0</span>      <span class="c1"># Default creativity level
</span>    <span class="p">)</span>
</code></pre></div></div>

<h2 id="variations-and-customizations">Variations and Customizations</h2>

<p>Let’s explore some variations of our solution to address different needs or preferences.</p>

<h3 id="variation-1-batch-processing-multiple-prompts">Variation 1: Batch Processing Multiple Prompts</h3>

<p>If you want to generate multiple music pieces from different prompts in sequence:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">batch_generate</span><span class="p">(</span><span class="n">prompts</span><span class="p">,</span> <span class="n">model_size</span><span class="o">=</span><span class="s">"small"</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mf">10.0</span><span class="p">):</span>
    <span class="s">"""Generate multiple music pieces from a list of prompts."""</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">prompt</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">prompts</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="se">\n</span><span class="s">Generating </span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s">/</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">prompts</span><span class="p">)</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">prompt</span><span class="p">[:</span><span class="mi">30</span><span class="p">]</span><span class="si">}</span><span class="s">..."</span><span class="p">)</span>
        <span class="n">output_path</span> <span class="o">=</span> <span class="n">generate_music</span><span class="p">(</span>
            <span class="n">prompt</span><span class="o">=</span><span class="n">prompt</span><span class="p">,</span>
            <span class="n">model_size</span><span class="o">=</span><span class="n">model_size</span><span class="p">,</span>
            <span class="n">duration</span><span class="o">=</span><span class="n">duration</span>
        <span class="p">)</span>
        <span class="n">results</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">output_path</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">results</span>

<span class="c1"># Usage
</span><span class="n">batch_generate</span><span class="p">(</span><span class="n">prompts</span><span class="p">,</span> <span class="n">model_size</span><span class="o">=</span><span class="s">"medium"</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mf">15.0</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="variation-2-temperature-exploration">Variation 2: Temperature Exploration</h3>

<p>If you want to explore how different temperature values affect the same prompt:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">explore_temperatures</span><span class="p">(</span><span class="n">prompt</span><span class="p">,</span> <span class="n">temperatures</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">],</span> <span class="n">model_size</span><span class="o">=</span><span class="s">"small"</span><span class="p">):</span>
    <span class="s">"""Generate variations of the same prompt with different temperature settings."""</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">temp</span> <span class="ow">in</span> <span class="n">temperatures</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="se">\n</span><span class="s">Generating with temperature=</span><span class="si">{</span><span class="n">temp</span><span class="si">}</span><span class="s">:"</span><span class="p">)</span>
        <span class="n">output_path</span> <span class="o">=</span> <span class="n">generate_music</span><span class="p">(</span>
            <span class="n">prompt</span><span class="o">=</span><span class="n">prompt</span><span class="p">,</span>
            <span class="n">temperature</span><span class="o">=</span><span class="n">temp</span><span class="p">,</span>
            <span class="n">model_size</span><span class="o">=</span><span class="n">model_size</span>
        <span class="p">)</span>
        <span class="n">results</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">output_path</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">results</span>

<span class="c1"># Usage
</span><span class="n">explore_temperatures</span><span class="p">(</span>
    <span class="s">"A cinematic orchestral piece with strings and brass"</span><span class="p">,</span>
    <span class="n">temperatures</span><span class="o">=</span><span class="p">[</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">]</span>
<span class="p">)</span>
</code></pre></div></div>

<h2 id="common-pitfalls-and-troubleshooting">Common Pitfalls and Troubleshooting</h2>

<h3 id="problem-out-of-memory-errors">Problem: Out of Memory Errors</h3>

<p>When running on GPUs, you might encounter out-of-memory errors, especially with larger models.</p>

<p><strong>Solution</strong>:</p>
<ul>
  <li>Use a smaller model size (‘small’ instead of ‘medium’ or ‘large’)</li>
  <li>Reduce the generation duration</li>
  <li>Ensure no other GPU-intensive applications are running</li>
  <li>Clear GPU cache between generations:</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Clear GPU cache between generations
</span><span class="k">if</span> <span class="n">torch</span><span class="p">.</span><span class="n">cuda</span><span class="p">.</span><span class="n">is_available</span><span class="p">():</span>
    <span class="n">torch</span><span class="p">.</span><span class="n">cuda</span><span class="p">.</span><span class="n">empty_cache</span><span class="p">()</span>
</code></pre></div></div>

<h3 id="problem-slow-generation">Problem: Slow Generation</h3>

<p><strong>Solution</strong>:</p>
<ul>
  <li>The first generation is always slower due to model loading</li>
  <li>Use GPU acceleration if available</li>
  <li>Pre-load the model once and reuse it for multiple generations:</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Pre-load the model once
</span><span class="n">model</span> <span class="o">=</span> <span class="n">MusicGen</span><span class="p">.</span><span class="n">get_pretrained</span><span class="p">(</span><span class="s">'small'</span><span class="p">)</span>
<span class="n">model</span><span class="p">.</span><span class="n">to</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>

<span class="c1"># Reuse for multiple generations
</span><span class="k">for</span> <span class="n">prompt</span> <span class="ow">in</span> <span class="n">prompts</span><span class="p">:</span>
    <span class="n">wav</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="n">generate</span><span class="p">([</span><span class="n">prompt</span><span class="p">])</span>
    <span class="c1"># Save output...
</span></code></pre></div></div>

<h3 id="problem-low-quality-or-undesirable-output">Problem: Low Quality or Undesirable Output</h3>

<p><strong>Solution</strong>:</p>
<ul>
  <li>Improve your prompt with more specific descriptions</li>
  <li>Adjust the temperature parameter (higher for more creativity, lower for more predictable results)</li>
  <li>Try different model sizes for better quality</li>
</ul>

<h2 id="hands-on-challenge">Hands-on Challenge</h2>

<p>Now it’s your turn to experiment with what you’ve learned. Try the following challenge:</p>

<h3 id="challenge-genre-specific-music-generator">Challenge: Genre-Specific Music Generator</h3>

<p>Create a script that:</p>
<ol>
  <li>Defines at least 5 different music genres with detailed prompts</li>
  <li>Generates a sample for each genre</li>
  <li>Creates a simple HTML page that lists all generated samples with playback controls</li>
  <li>Adds controls for adjusting temperature and duration</li>
</ol>

<h3 id="bonus-challenge">Bonus Challenge</h3>

<p>Experiment with combining AudioCraft’s MusicGen with a visualization library to create music visualizations that respond to the generated audio.</p>

<h2 id="key-takeaways">Key Takeaways</h2>

<ul>
  <li>[Key concept #1 recap]</li>
  <li>[Key concept #2 recap]</li>
  <li>[Key concept #3 recap]</li>
  <li>[Key concept #4 recap]</li>
</ul>

<h2 id="next-steps">Next Steps</h2>

<p>Now that you’ve mastered [this chapter’s topic], you’re ready to explore:</p>

<ul>
  <li></li>
  <li></li>
  <li></li>
</ul>

<h2 id="further-reading">Further Reading</h2>

<ul>
  <li>[Resource #1]</li>
  <li>[Resource #2]</li>
  <li>[Resource #3]</li>
</ul>

  
  
  
  
  
  
  
  
</div>

<div class="chapter-navigation">
  
  
  
</div>

<!-- Copyright footer for all chapter pages -->
<div class="copyright-footer">
  <hr>
  <p>
    Copyright © 2025 Scott Friedman.
    <br>
    This work is licensed under the <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.
  </p>
</div>


        </div>
      </main>

      <footer class="site-footer">
        <div class="container">
          <div class="footer-col-wrapper">
            <div class="footer-col">
              <p>A hands-on guide to creating music, sound effects, and audio experiences with AI</p>
              <p>
                <a href="https://github.com/facebookresearch/audiocraft">AudioCraft GitHub Repository</a>
              </p>
            </div>
            <div class="footer-col">
              <p class="copyright">
                Copyright © 2025 Scott Friedman.<br>
                Licensed under <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a>.
              </p>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </body>
</html>